# 生产看板内网部署指南

## 📋 部署方案概述

本项目提供3种内网部署方案，根据内网环境选择最适合的方案：

### 方案对比

| 方案 | 环境要求 | 优点 | 缺点 | 推荐度 |
|------|----------|------|------|--------|
| **静态文件** | 现代浏览器 | 简单、兼容性好 | 功能有限制 | ⭐⭐⭐⭐⭐ |
| **Node.js服务器** | Node.js 16+ | 功能完整、性能好 | 需要运行环境 | ⭐⭐⭐⭐ |
| **Electron桌面应用** | 无 | 独立运行、用户体验好 | 文件较大 | ⭐⭐⭐⭐ |

## 🚀 方案1：静态文件部署（推荐）

### 特点
- ✅ 只需要现代浏览器即可运行
- ✅ 部署简单，无需安装任何环境
- ✅ 兼容性最好
- ⚠️ 数据存储在浏览器本地

### 部署步骤

1. **制作部署包**
   ```bash
   # 在开发环境运行
   scripts/内网部署包.bat
   ```

2. **部署到内网**
   - 将生成的 `内网部署包` 文件夹复制到内网机器
   - 用浏览器直接打开 `内网部署包/dist/index.html`

3. **访问应用**
   - 直接双击 `index.html` 文件
   - 或者在浏览器地址栏输入文件路径

### 注意事项
- 数据保存在浏览器的localStorage中
- 清除浏览器数据会丢失任务信息
- 建议定期导出数据备份

## 🖥️ 方案2：Node.js服务器部署

### 特点
- ✅ 功能完整，支持多用户访问
- ✅ 数据持久化存储
- ✅ 支持局域网访问
- ❌ 需要安装Node.js环境

### 部署步骤

1. **制作部署包**
   ```bash
   # 在开发环境运行
   scripts/内网部署包.bat
   ```

2. **内网环境准备**
   - 安装Node.js 16或更高版本
   - 下载地址：https://nodejs.org/

3. **部署到内网**
   - 将 `内网部署包` 复制到内网服务器
   - 运行启动脚本：
     ```bash
     # Windows
     启动服务器.bat

     # Linux/Mac
     ./启动服务器.sh
     ```

4. **访问应用**
   - 浏览器访问：http://localhost:8000
   - 局域网访问：http://[服务器IP]:8000

## 📱 方案3：Electron桌面应用

### 特点
- ✅ 独立运行，无需浏览器
- ✅ 用户体验最好
- ✅ 支持数据库存储
- ❌ 文件体积较大（约100MB）

### 部署步骤

1. **制作桌面应用**
   ```bash
   # 在开发环境运行
   scripts/打包桌面应用.bat
   ```

2. **部署到内网**
   - 将生成的 `dist-electron` 文件夹复制到内网机器
   - 运行安装程序或直接运行exe文件

3. **使用应用**
   - 安装后在桌面或开始菜单找到"生产看板"
   - 双击启动应用

## 🔧 高级配置

### 自定义端口（Node.js方案）

修改 `server.cjs` 文件中的端口：
```javascript
const port = 8000; // 改为你需要的端口
```

### 数据库配置（Electron方案）

数据库文件位置：`database/production.db`
- 可以备份此文件来保存数据
- 删除此文件可以重置所有数据

### 网络访问配置

如需要局域网访问，确保：
1. 防火墙允许对应端口
2. 服务器IP地址可访问
3. 端口未被其他程序占用

## 🛠️ 故障排除

### 常见问题

1. **浏览器打开空白页**
   - 检查是否使用现代浏览器（Chrome、Firefox、Edge）
   - 确保没有被杀毒软件阻止

2. **Node.js服务器无法启动**
   - 检查Node.js版本是否为16+
   - 确认端口没有被占用
   - 查看控制台错误信息

3. **Electron应用无法启动**
   - 检查是否有杀毒软件阻止
   - 确保有足够的磁盘空间
   - 尝试以管理员身份运行

4. **数据丢失问题**
   - 静态文件方案：检查浏览器是否清除了localStorage
   - Node.js方案：检查数据库文件是否存在
   - Electron方案：检查database文件夹权限

### 技术支持

如遇到问题，请提供：
- 使用的部署方案
- 操作系统版本
- 浏览器版本（如适用）
- 错误信息截图

## 📋 部署检查清单

### 部署前检查
- [ ] 确认内网环境要求
- [ ] 准备好部署包
- [ ] 测试网络连接

### 部署后检查
- [ ] 应用能正常启动
- [ ] 页面显示正常
- [ ] 功能测试通过
- [ ] 数据能正常保存

### 用户培训
- [ ] 演示基本操作
- [ ] 说明数据备份方法
- [ ] 提供技术支持联系方式

## 🔄 更新部署

当需要更新应用时：
1. 备份现有数据
2. 替换应用文件
3. 测试新版本功能
4. 恢复数据（如需要）

---

*本指南适用于生产看板系统 v1.0.0*
