# 生产看板系统 - 静态文件部署指南

## 📋 概述

静态文件部署方案是最适合Win7内网环境的部署方式，具有以下优势：

- ✅ **无需安装环境**：只需要现代浏览器即可运行
- ✅ **兼容性最好**：支持Win7及以上系统
- ✅ **部署简单**：复制文件即可使用
- ✅ **维护方便**：更新只需替换文件
- ✅ **安全可靠**：本地运行，数据不外泄

## 🚀 快速开始

### 步骤1：制作部署包

在开发环境中运行以下命令：

```bash
# Windows环境
scripts\创建内网部署包.bat

# 或者手动执行
npm install
npm run build
```

### 步骤2：部署到内网

1. 将生成的 `内网部署包` 文件夹复制到目标机器
2. 双击 `启动应用.bat` 或直接双击 `index.html`
3. 应用将在浏览器中自动打开

## 🔧 详细部署步骤

### 1. 环境准备

**开发环境要求：**
- Node.js 16+
- npm 或 yarn
- 现代浏览器

**目标环境要求：**
- Windows 7+ 或其他操作系统
- 现代浏览器（Chrome 49+、Firefox 45+、Edge 79+）

### 2. 制作部署包

#### 方法1：使用自动化脚本（推荐）

```bash
# 在项目根目录运行
scripts\创建内网部署包.bat
```

脚本将自动完成：
- 安装依赖
- 构建应用
- 创建部署包
- 生成启动脚本
- 创建使用说明

#### 方法2：手动制作

```bash
# 1. 安装依赖
npm install

# 2. 构建应用
npm run build

# 3. 复制dist文件夹内容到部署目录
copy dist\* 内网部署包\
```

### 3. 部署包结构

制作完成的部署包包含以下文件：

```
内网部署包/
├── index.html              # 主页面文件
├── browser-check.js        # 浏览器兼容性检测
├── assets/                 # 应用资源文件
│   ├── *.js               # JavaScript文件
│   ├── *.css              # 样式文件
│   └── *.png              # 图片资源
├── sql.js-wasm/           # SQLite WebAssembly文件
│   ├── sql-wasm.js
│   └── sql-wasm.wasm
├── 启动应用.bat            # Windows启动脚本
├── 使用说明.txt            # 详细使用说明
└── 部署报告.txt            # 部署信息报告
```

### 4. 部署到目标环境

#### 方法1：本地文件访问

1. 将 `内网部署包` 文件夹复制到目标机器
2. 双击 `启动应用.bat`（Windows）
3. 或直接双击 `index.html` 文件

#### 方法2：Web服务器部署

如果有内网Web服务器，可以将文件部署到服务器：

```bash
# 将部署包内容复制到Web服务器目录
copy 内网部署包\* C:\inetpub\wwwroot\kanban\

# 通过浏览器访问
http://服务器IP/kanban/
```

## 🌐 浏览器兼容性

### 推荐浏览器

| 浏览器 | 最低版本 | 推荐版本 | Win7支持 |
|--------|----------|----------|----------|
| Chrome | 49 | 58+ | ✅ |
| Firefox | 45 | 57+ | ✅ |
| Edge | 79 | 最新版 | ❌ (Win10+) |
| Safari | 10 | 11+ | ❌ (macOS) |

### 不支持的浏览器

- ❌ Internet Explorer（所有版本）
- ❌ Chrome 48及以下版本
- ❌ Firefox 44及以下版本

### 兼容性检测

应用内置了自动兼容性检测功能：

- 🔍 **自动检测**：页面加载时自动检测浏览器能力
- ⚠️ **友好提示**：不兼容时显示详细的升级建议
- ✅ **通过提示**：兼容时显示绿色确认提示

## 📱 功能特性

### 核心功能

- ✅ **任务看板管理**：拖拽式任务状态管理
- ✅ **Excel文件导入**：支持.xlsx格式文件导入
- ✅ **数据本地存储**：使用浏览器localStorage存储
- ✅ **师傅智能分配**：基于历史数据的智能分配算法
- ✅ **甘特图可视化**：时间进度可视化展示
- ✅ **数据导出备份**：支持数据导出和恢复

### 技术特性

- 🔧 **离线运行**：无需网络连接
- 🔧 **响应式设计**：适配不同屏幕尺寸
- 🔧 **现代UI**：基于Ant Design组件库
- 🔧 **高性能**：使用WebAssembly加速数据处理

## 🛠️ 故障排除

### 常见问题

#### 1. 页面显示空白

**原因：** 浏览器版本过低或不支持

**解决方案：**
- 更换到Chrome 49+或Firefox 45+
- 检查浏览器是否启用了JavaScript
- 查看浏览器控制台是否有错误信息

#### 2. 文件导入失败

**原因：** 文件格式不支持或浏览器File API限制

**解决方案：**
- 确保Excel文件为.xlsx格式
- 检查文件大小是否超过10MB
- 尝试在Chrome浏览器中操作

#### 3. 数据丢失

**原因：** 浏览器数据被清除

**解决方案：**
- 检查是否清除了浏览器数据
- 从备份文件恢复数据
- 定期使用"导出数据"功能备份

#### 4. 应用加载缓慢

**原因：** WebAssembly文件加载或系统性能限制

**解决方案：**
- 等待WebAssembly文件完全加载
- 关闭其他占用内存的程序
- 使用性能更好的浏览器

### 调试方法

#### 1. 浏览器控制台

按F12打开开发者工具，查看Console标签页的错误信息：

```javascript
// 常见错误类型
"WebAssembly is not defined" // 浏览器不支持WebAssembly
"localStorage is not available" // 本地存储不可用
"Failed to fetch" // 文件加载失败
```

#### 2. 兼容性检测结果

在控制台输入以下命令查看检测结果：

```javascript
console.log(window.browserCompatibility);
```

#### 3. 网络面板

查看Network标签页，确认所有资源文件都正确加载。

## 📊 性能优化

### 1. 文件大小优化

- 构建时自动压缩JavaScript和CSS
- 移除开发环境的console.log
- 优化图片资源大小

### 2. 加载速度优化

- 使用浏览器缓存
- 预加载关键资源
- 延迟加载非关键功能

### 3. 运行性能优化

- 使用WebAssembly加速数据处理
- 优化DOM操作
- 合理使用内存

## 🔒 安全考虑

### 数据安全

- ✅ **本地存储**：数据保存在用户浏览器本地
- ✅ **无网络传输**：应用完全离线运行
- ✅ **文件访问控制**：只能访问用户主动选择的文件

### 使用建议

- 🔐 定期备份重要数据
- 🔐 不要在公共电脑上使用
- 🔐 注意浏览器隐私设置

## 📋 维护更新

### 更新流程

1. **制作新版本部署包**
2. **备份现有数据**（导出功能）
3. **替换应用文件**
4. **恢复数据**（导入功能）
5. **测试功能正常**

### 版本管理

- 每个部署包都包含版本信息
- 建议保留最近2-3个版本的部署包
- 重大更新前务必备份数据

## 📞 技术支持

### 联系方式

- 📧 邮箱：support@production-kanban.com
- 📱 电话：400-xxx-xxxx
- 💬 QQ群：xxxxxxxxx

### 反馈信息

遇到问题时，请提供以下信息：

- 操作系统版本
- 浏览器类型和版本
- 错误截图或描述
- 操作步骤重现

---

**版本：** v1.0.0
**更新时间：** 2024年1月
**适用环境：** Win7+ 内网环境
